language: java
jdk:
  - oraclejdk7
  - openjdk7
before_install:
  - mvn --non-recursive scm:checkout -Dmodule.name=document-service-client-java -DscmVersion=1.0.1 -DscmVersionType=tag
  - mvn --non-recursive scm:checkout -Dmodule.name=STIXExtractors -DscmVersion=1.0.0 -DscmVersionType=tag
  - mvn --non-recursive scm:checkout -Dmodule.name=entity-extractor -DscmVersion=1.0.0 -DscmVersionType=tag
  - cd entity-extractor
  - mvn -e clean install -Dmaven.test.skip=true
  - cd ..
  - mvn --non-recursive scm:checkout -Dmodule.name=relation-extractor -DscmVersion=1.0.0 -DscmVersionType=tag
  - cd relation-extractor
  - mvn -e clean install -Dmaven.test.skip=true
  - cd ..
  - mvn -q --non-recursive scm:checkout -Dmodule.name=graph-db-connection -DscmVersion=PostgreSQL -DscmVersionType=branch
  - cd graph-db-connection
  - mvn -e clean install -Dmaven.test.skip=true
  - cd ..
  - mvn -q --non-recursive scm:checkout -Dmodule.name=graph-alignment -DscmVersion=feature -DscmVersionType=branch
  - cd graph-alignment
  - mvn -e clean install -Dmaven.test.skip=true
  - cd ..
  - mvn clean install -Dmaven.test.skip=true
  - cd streaming-processor
after_success:
  - wget https://raw.githubusercontent.com/stucco/test/master/rerun-test.sh
  - chmod a+x ./rerun-test.sh
  - ./rerun-test.sh
notifications:
  slack: sava:lB0VBcWKom3VNlr126hyI04E
